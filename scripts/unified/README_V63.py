#!/usr/bin/env python3
"""
Quant-Investor Unified v7.0 + MacroRiskTerminal V6.3
æœ€ç»ˆé›†æˆç‰ˆæœ¬ - ä½¿ç”¨æŒ‡å—

åŠŸèƒ½æ¸…å•:
1. é‡åŒ–æŠ•èµ„åˆ†æ (V2.7-V6.0æ•´åˆ)
2. å®è§‚é£æ§åˆ†æ (V6.3å®Œæ•´æŒ‡æ ‡ä½“ç³»)
3. ç»¼åˆä¿¡å·åˆ¤æ–­ (åŸºäºæŒ‡æ ‡ä½“ç³»æ–‡æ¡£)
"""

print("""
================================================================================
Quant-Investor Unified v7.0 + MacroRiskTerminal V6.3
æœ€ç»ˆé›†æˆç‰ˆæœ¬
================================================================================

ğŸ“ é¡¹ç›®ç»“æ„:
--------------------------------------------------------------------------------
myQuant/scripts/unified/
â”œâ”€â”€ unified_v63_complete.py      # ä¸»å…¥å£ - å®Œæ•´é›†æˆç‰ˆæœ¬ â­
â”œâ”€â”€ macro_terminal_v63.py        # MacroRiskTerminal V6.3 å®Œæ•´å®ç°
â”œâ”€â”€ pipeline/                    # é‡åŒ–æµæ°´çº¿
â”‚   â””â”€â”€ __init__.py              # MasterPipelineUnified
â”œâ”€â”€ data_layer/                  # æ•°æ®å±‚
â”œâ”€â”€ factor_layer/                # å› å­å±‚ (7ä¸ªåŸºç¡€å› å­)
â”œâ”€â”€ model_layer/                 # æ¨¡å‹å±‚
â”œâ”€â”€ decision_layer/              # å†³ç­–å±‚
â”œâ”€â”€ risk_layer/                  # é£æ§å±‚
â”œâ”€â”€ MACRO_RISK_GUIDE.md          # å®è§‚é£æ§æŒ‡æ ‡ä½“ç³»æ–‡æ¡£
â””â”€â”€ full_report.md               # ç¤ºä¾‹å®Œæ•´æŠ¥å‘Š

================================================================================
ğŸš€ å¿«é€Ÿå¼€å§‹
================================================================================

æ–¹å¼1: ä¸€è¡Œä»£ç åˆ†æ (æ¨è)
--------------------------------------------------------------------------------
from unified_v63_complete import analyze_complete

results = analyze_complete(
    market="US",                           # å¸‚åœº: US/CN
    stocks=["AAPL", "MSFT", "NVDA"],       # è‚¡ç¥¨æ± 
    lookback_years=0.5,                    # å›æµ‹å¹´é™
    enable_macro=True,                     # å¯ç”¨å®è§‚åˆ†æ
    verbose=True                           # æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
)

# è·å–å…³é”®ç»“æœ
print(results['final_signal'])        # ğŸŸ¡ ä¸­é£é™©
print(results['position_advice'])     # 30%-60% ä»“ä½
print(results['strategy_adjustment']) # æ§åˆ¶ä»“ä½ï¼Œç²¾é€‰é«˜è´¨é‡ä¸ªè‚¡

æ–¹å¼2: å®Œæ•´æ§åˆ¶
--------------------------------------------------------------------------------
from unified_v63_complete import UnifiedWithMacroV63

analyzer = UnifiedWithMacroV63(
    market="US",
    stock_pool=["AAPL", "MSFT", "NVDA", "GOOGL", "AMZN"],
    lookback_years=1.0,
    enable_macro_risk=True,
    macro_weight=0.3,      # å®è§‚ä¿¡å·æƒé‡
    verbose=True
)

results = analyzer.run()

# ç”Ÿæˆå®Œæ•´MarkdownæŠ¥å‘Š
report_md = analyzer.generate_full_report(results)
with open('my_report.md', 'w') as f:
    f.write(report_md)

================================================================================
ğŸ“Š åŠŸèƒ½ç‰¹æ€§
================================================================================

é‡åŒ–æŠ•èµ„å±‚ (Unified v7.0):
--------------------------------------------------------------------------------
âœ… æ•°æ®è·å–     - yfinance/Tushareå¤šæºæ”¯æŒ
âœ… å› å­è®¡ç®—     - åŠ¨é‡/æ³¢åŠ¨ç‡/å‡å€¼å›å½’/æˆäº¤é‡ (7ä¸ªåŸºç¡€å› å­)
âœ… MLæ¨¡å‹       - XGBoost/LightGBM/RandomForesté›†æˆ
âœ… ç»„åˆä¼˜åŒ–     - æœ€å¤§å¤æ™®æ¯”ç‡é…ç½®
âœ… é£é™©è¯„ä¼°     - VaR/æ³¢åŠ¨ç‡/å›æ’¤/å‹åŠ›æµ‹è¯•

å®è§‚é£æ§å±‚ (MacroRiskTerminal V6.3):
--------------------------------------------------------------------------------
âœ… å¤šå¸‚åœºé€‚é…   - CN (Aè‚¡) / US (ç¾è‚¡)
âœ… å®Œæ•´æŒ‡æ ‡ä½“ç³» - åŸºäºæŒ‡æ ‡ä½“ç³»æ–‡æ¡£å®ç°

ç¾è‚¡ (US) äº”å¤§æ¨¡å—:
  â€¢ è´§å¸æ”¿ç­–      - è”é‚¦åŸºé‡‘åˆ©ç‡ã€ç¾è”å‚¨èµ„äº§è´Ÿå€ºè¡¨
  â€¢ ç»æµå¢é•¿      - GDPå¢é€Ÿã€å¤±ä¸šç‡
  â€¢ æ•´ä½“ä¼°å€¼      - å·´è²ç‰¹æŒ‡æ ‡ã€Shiller PE (CAPE)
  â€¢ é€šèƒ€          - CPIã€PPIã€æ ¸å¿ƒPCE
  â€¢ æƒ…ç»ªä¸æ”¶ç›Šç‡æ›²çº¿ - 10Y-2Yåˆ©å·®ã€VIXã€æ¶ˆè´¹è€…ä¿¡å¿ƒ

Aè‚¡ (CN) å››å¤§æ¨¡å—:
  â€¢ èµ„é‡‘æ æ†ä¸æƒ…ç»ª - ä¸¤èä½™é¢ã€ä¸¤è/æµé€šå¸‚å€¼æ¯”
  â€¢ ç»æµæ™¯æ°”åº¦    - GDPåŒæ¯”å¢é€Ÿ
  â€¢ æ•´ä½“ä¼°å€¼é”š    - å·´è²ç‰¹æŒ‡æ ‡
  â€¢ é€šèƒ€ä¸è´§å¸    - CPIã€PPIã€M1-M2å‰ªåˆ€å·®ã€M2å¢é€Ÿã€ç¤¾è

ç»¼åˆä¿¡å· (åŸºäºæŒ‡æ ‡ä½“ç³»æ–‡æ¡£):
--------------------------------------------------------------------------------
ğŸ”´ é«˜é£é™©   - ä»»æ„2ä¸ªæ¨¡å—çº¢è‰²  â†’ â‰¤30%ä»“ä½, é˜²å¾¡ä¸ºä¸»
ğŸŸ¡ ä¸­é£é™©   - 1ä¸ªçº¢è‰²æˆ–2ä¸ªé»„è‰² â†’ 30%-60%ä»“ä½, æ§åˆ¶ä»“ä½
ğŸŸ¢ ä½é£é™©   - å¤šæ•°ç»¿è‰²ä¿¡å·     â†’ 60%-90%ä»“ä½, æ­£å¸¸é…ç½®
ğŸ”µ æä½é£é™© - å¤šæ•°è“è‰²(åº•éƒ¨)   â†’ 80%-100%ä»“ä½, é€†å‘å¸ƒå±€

================================================================================
ğŸ“ˆ åˆ†æç»“æœç¤ºä¾‹
================================================================================

è¾“å…¥:
  å¸‚åœº: US
  è‚¡ç¥¨: ["AAPL", "MSFT", "NVDA", "GOOGL", "AMZN"]
  å›æµ‹: 0.5å¹´

è¾“å‡º:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ¯ ç»¼åˆç»“è®º                                                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ é£æ§ä¿¡å·: ğŸŸ¡ ä¸­é£é™©                                          â”‚
  â”‚ ä»“ä½å»ºè®®: 30%-60% ä»“ä½                                       â”‚
  â”‚ ç­–ç•¥è°ƒæ•´: æ§åˆ¶ä»“ä½ï¼Œç²¾é€‰é«˜è´¨é‡ä¸ªè‚¡                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“Š é‡åŒ–åˆ†æ:
    - åˆ†ææ ‡çš„: 5åªè‚¡ç¥¨
    - æœ‰æ•ˆå› å­: 7ä¸ª (momentum_5d/20d/60d, volatility_20d, ma_bias_20dç­‰)
    - æ¨¡å‹æ’å: 5åª (åŸºäºåŠ¨é‡+å‡å€¼å›å½’å› å­è¯„åˆ†)
    - ç»„åˆé…ç½®: NVDA 20%, AAPL 20%, GOOGL 20%, AMZN 20%, MSFT 20%
    - é¢„æœŸæ”¶ç›Š: 5.00%
    - é¢„æœŸæ³¢åŠ¨: 25.00%

  ğŸŒ å®è§‚é£æ§ (V6.3):
    - è´§å¸æ”¿ç­–: ğŸŸ¡ åç´§ (åˆ©ç‡4.5%, ç¼©è¡¨ä¸­)
    - ç»æµå¢é•¿: ğŸŸ¢ æ¸©å’Œ (GDP 2.3%, å¤±ä¸šç‡4.1%)
    - æ•´ä½“ä¼°å€¼: ğŸ”´ åé«˜ (CAPE 32x, é«˜äºå‡å€¼17x)
    - é€šèƒ€:     ğŸŸ¡ åé«˜ (CPI 3.2%, æ ¸å¿ƒPCE 2.8%)
    - æƒ…ç»ªä¸æ”¶ç›Šç‡æ›²çº¿: ğŸŸ¡ å¹³å¦ (åˆ©å·®46bp, VIX 18.7)

================================================================================
ğŸ”§ é«˜çº§ç”¨æ³•
================================================================================

è‡ªå®šä¹‰å®è§‚æƒé‡:
--------------------------------------------------------------------------------
analyzer = UnifiedWithMacroV63(
    market="US",
    stock_pool=["TSLA", "META", "AMD"],
    macro_weight=0.5,  # æé«˜å®è§‚ä¿¡å·æƒé‡è‡³50%
    verbose=True
)

ä»…è¿è¡Œå®è§‚åˆ†æ (è·³è¿‡é‡åŒ–):
--------------------------------------------------------------------------------
from macro_terminal_v63 import create_terminal

terminal = create_terminal("US")
report = terminal.generate_risk_report()
markdown = terminal.format_report_markdown(report)
print(markdown)

æ‰©å±•æ–°å¸‚åœº:
--------------------------------------------------------------------------------
from macro_terminal_v63 import MacroRiskTerminalBase, ModuleResult

class HKMacroRiskTerminal(MacroRiskTerminalBase):
    MARKET = "HK"
    MARKET_NAME = "æ¸¯è‚¡"
    
    def get_modules(self) -> List[ModuleResult]:
        # å®ç°æ¸¯è‚¡ç‰¹æœ‰çš„å®è§‚é£æ§æ¨¡å—
        # å¦‚: è”ç³»æ±‡ç‡ã€æ¸¯è‚¡é€šèµ„é‡‘æµã€æ’ç”ŸæŒ‡æ•°PEç­‰
        pass

================================================================================
ğŸ“š å‚è€ƒæ–‡æ¡£
================================================================================

æŒ‡æ ‡ä½“ç³»æ–‡æ¡£: MACRO_RISK_GUIDE.md
  - å¸‚åœºè‡ªåŠ¨æ£€æµ‹è§„åˆ™
  - Aè‚¡å››å¤§æ¨¡å—å®Œæ•´æŒ‡æ ‡ä½“ç³»
  - ç¾è‚¡äº”å¤§æ¨¡å—å®Œæ•´æŒ‡æ ‡ä½“ç³»
  - ç»¼åˆé£æ§ä¿¡å·è®¡ç®—è§„åˆ™
  - å†å²å¯¹æ ‡å‚è€ƒå€¼

å®Œæ•´æŠ¥å‘Šç¤ºä¾‹: full_report.md

================================================================================
ğŸ’¡ æç¤º
================================================================================

1. é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–:
   pip install pandas numpy yfinance

2. Aè‚¡åˆ†æéœ€è¦é…ç½®Tushare Token:
   export TUSHARE_TOKEN="your_token_here"

3. ç¾è‚¡åˆ†æä½¿ç”¨yfinanceï¼Œæ— éœ€API Key

4. æ‰€æœ‰åˆ†æè¿‡ç¨‹éƒ½æœ‰è¯¦ç»†æ—¥å¿—ï¼Œverbose=TrueæŸ¥çœ‹

================================================================================
""")

if __name__ == '__main__':
    # è¿è¡Œç¤ºä¾‹
    print("\næ­£åœ¨è¿è¡Œç¤ºä¾‹åˆ†æ...")
    print("-" * 80)
    
    from unified_v63_complete import analyze_complete
    
    results = analyze_complete(
        market="US",
        stocks=["AAPL", "MSFT", "NVDA"],
        lookback_years=0.5,
        verbose=False
    )
    
    print(f"\nâœ… åˆ†æå®Œæˆ!")
    print(f"   ä¿¡å·: {results['final_signal']}")
    print(f"   ä»“ä½: {results['position_advice']}")
    print(f"   ç­–ç•¥: {results['strategy_adjustment']}")
